<!DOCTYPE HTML>
<html lang="en">
<!-- Inspired by the "Motivation" extension on Chrome-->
<!-- Written by Josh Spicer on Dec 15, 2017-->

<!-- Displays age and dynamically ticks through 10 decimal places.
     Background color is generated by taking the 2nd through 7th decimal values -->

<title> Age </title>

<head>
<style>
  .ticker {
    position: absolute;
    top: 30%;
    width: 100%;
    height: 100%;
    color: white;
    font-size: 3em;
    text-align: center;
    font-family: monospace;
  }

  .bottom-right {
    position: absolute;
    bottom: 0px;
    right: 16px;
    font-size: 18px;
    text-align: center;
    font-family: monospace;
    color: white;
}

.bottom-left {
  text-decoration: none;
  position: absolute;
  bottom: 0px;
  left: 5px;
  font-size: 18px;
  font-family: monospace;
  color: white;
}

a:link {
  text-decoration: none;
  color: white;
}

a:visited {
  text-decoration: none;
  color: white;
}

body {
  background-color: gray;
  overflow:hidden;
}

</style>
</head>

<body>

<div class="ticker">
  <p style="font-size:100px;display:inline"> <span id="firstHalf">0</span></p>
  .
  <p style="font-size:50px;display:inline"><span id="secondHalf">0</span></p>
</div>

<div class="bottom-right"><span id="colorInfo">#000000</span> </div>

<div class="bottom-left"><a href="./index.html"<span id="birthday"> Jan 1, 1000"</span> </a></div>

</body>

  <script>


  function getQueryVariable(variable) {
       var query = window.location.search.substring(1);
       var vars = query.split("&");
       for (var i=0;i<vars.length;i++) {
               var pair = vars[i].split("=");
               if(pair[0] == variable){return pair[1];}
       }
       return(false);
}

  function calculateAge() {
    var month = getQueryVariable("m");
    var day = getQueryVariable("d");
    var year = getQueryVariable("y");
    var hour = getQueryVariable("hr");
    var minute = getQueryVariable("min");
    // "October 17, 1997 04:18:00"
    var birthday = new Date(month + " " + day + ", " + year  + " " +  hour + ":" + minute + ":00");
    var currentTime = new Date();
    var difference = currentTime - birthday;
    // How old am I in years (with a decimal)
    return (difference / (1000*60*60*24)) / 365.2422;
  }

  function displayBirthday() {
    var month = getQueryVariable("m");
    var day = getQueryVariable("d");
    var year = getQueryVariable("y");
    var hour = getQueryVariable("hr");
    var minute = getQueryVariable("min")

    return month + " " + day + ", " + year + " at " + hour + ":" + minute;

  }

  function firstHalf() {
    var age = calculateAge();
    return Math.floor(age);
  }

  function secondHalf() {
    var age = calculateAge();
    return (age % 1).toFixed(10).substring(2);
  }


  window.setInterval(function(){
    document.getElementById("firstHalf").innerHTML = firstHalf();
  }, 100);

  window.setInterval(function(){
    document.getElementById("secondHalf").innerHTML = secondHalf();
  }, 100);

  window.setInterval(function(){
    document.getElementById("colorInfo").innerHTML = "#" + secondHalf().substring(1,7);
  }, 100);

  window.setInterval(function(){
    // Sets background color based on my age!
    document.body.style.background = "#" + secondHalf().substring(1,7);
  }, 100);

  document.getElementById("birthday").innerHTML = displayBirthday();


  </script>




</html>
