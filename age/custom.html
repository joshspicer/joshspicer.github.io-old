<!DOCTYPE HTML>
<html lang="en">
<!-- Inspired by the "Motivation" extension on Chrome-->
<!-- Written by Josh Spicer on Dec 15, 2017-->
<title> Age! </title>

<head>
<style>
  body {
    position: absolute;
    top: 20%;
    width: 100%;
    height: 40%;
    color: white;
    font-size: 3em;
    text-align: center;
    font-family: monospace;
  }

body {
  background-color: gray;
}
</style>
</head>

<body>
  <h1>How old are you?</h1>

  <p>
<h3>
    Your birthday is <span id="birthday">x</span><br><br>
    You are <span id="age">0</span> years old!
</h3>
  </p>

</body>

  <script>


  function getQueryVariable(variable) {
       var query = window.location.search.substring(1);
       var vars = query.split("&");
       for (var i=0;i<vars.length;i++) {
               var pair = vars[i].split("=");
               if(pair[0] == variable){return pair[1];}
       }
       return(false);
}



  function calculateAge() {
    var month = getQueryVariable("m");
    var day = getQueryVariable("d");
    var year = getQueryVariable("y");
    var hour = getQueryVariable("hr");
    var minute = getQueryVariable("min");
    // "October 17, 1997 04:18:00"
    var birthday = new Date(month + " " + day + ", " + year  + " " +  hour + ":" + minute + ":00");
    var currentTime = new Date();
    var difference = currentTime - birthday;
    // How old am I in years (with a decimal)
    return (difference / (1000*60*60*24)) / 365.2422;
  }

  function displayBirthday() {
    var month = getQueryVariable("m");
    var day = getQueryVariable("d");
    var year = getQueryVariable("y");
    var hour = getQueryVariable("hr");
    var minute = getQueryVariable("min")

    return month + " " + day + ", " + year + " at " + hour + ":" + minute;

  }

  window.setInterval(function(){
    document.getElementById("age").innerHTML = calculateAge();
  }, 100);

  document.getElementById("birthday").innerHTML = displayBirthday();


  </script>




</html>
